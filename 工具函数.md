### 获取图片文件的宽高

```javascript
function getImageSize(file) {
  return new Promise(function (resolve, reject) {
    const reader = new FileReader();
    reader.onload = function (e) {
      const image = new Image();
      image.onload = function () {
        const { width, height } = image;
        resolve({ width, height });
      };
      image.src = e.target.result;
    };
    reader.readAsDataURL(file);
  });
}
```

### 格式化时间

```javascript
export function getFormatDate(
  time = new Date().getTime(),
  format = "YY-MM-DD hh:mm:ss"
) {
  const date = new Date(time);

  const year = date.getFullYear(),
    month = date.getMonth() + 1,
    day = date.getDate(),
    hour = date.getHours(),
    minute = date.getMinutes(),
    second = date.getSeconds();

  const preArr = Array.apply(null, Array(10)).map(function (elem, index) {
    return "0" + index;
  });

  const newTime = format
    .replace(/YY/g, year)
    .replace(/MM/g, preArr[month] || month)
    .replace(/DD/g, preArr[day] || day)
    .replace(/hh/g, preArr[hour] || hour)
    .replace(/mm/g, preArr[minute] || minute)
    .replace(/ss/g, preArr[second] || second);

  return newTime;
}
```

### 创建元素并触发点击事件

```js
function triggerClick() {
  const dom = document.createElement("div");

  dom.style.display = "none";

  document.body.append(dom);

  const e = document.createEvent("MouseEvents");
  e.initEvent("click", true, true);
  dom.dispatchEvent(e);

  document.body.removeChild(dom);
}
```

### 请求下载文件

```js
export function download(res) {
  const url = window.URL.createObjectURL(new Blob([res.data]));
  const disposition = res.headers["content-disposition"];

  let fileName;
  if (disposition) {
    const file = disposition
      .split(";")
      .find((v) => v.indexOf("filename=") > -1);

    if (file) {
      fileName = decodeURIComponent(file.split("=")[1] || "文件");
    }
  }

  downloadFromUrl(url, fileName);
}

export function downloadFromUrl(url, fileName) {
  const link = document.createElement("a");
  link.href = url;
  if (fileName) {
    link.setAttribute("download", fileName);
  }
  document.body.appendChild(link);
  link.click();
  link.remove();
}
```
